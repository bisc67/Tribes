<!-- This page was created with the RAD auto-doc generator. -->
<!doctype html public "-//w3c//dtd html 3.2 final//en">
<html>
<head>
<title>Change Log</title>
<meta http-equiv="content-type" content="text/html; charset=iso8859-1">
<meta name="ms.locale" content="en-us">
<meta name="description" content="">
<meta name="ms-hkwd" content="Change Log">
<link rel="stylesheet" title="default" href="reference.css" type="text/css" media="screen">
</head>
<body topmargin="0">
<table cellspacing=0 cellpadding=0 class=bar width=100% height=25>
<tr class=bar>
<td class=bar>
<i>&nbsp;<a href="index.html" class=trn>Miles Sound System SDK 6.1c</a></i>
</td>
</tr>
</table>
<h4>Discussion</h4>
<p>This change log includes the entire Miles Sound System development history. </p>
<h1>Changes from version 6.1b to 6.1c (10-15-2001)</h1>
<ul>
<li>Added the new 3D functions: AIL_set_3D_rolloff_factor, AIL_set_3D_doppler_factor, and AIL_set_3D_distance factor.</li>
<li>Fixed a bug in the DLS synth where MIDI notes could sometimes get shut off when a song looped.</li>
<li>Added support for MP3 files with ID3 v2 headers. ID3 v2 headers can be up to 64K, so you will usually want to avoid them for space considerations.</li>
<li>Fixed a subtle bug in the PC downsampling mixers, where the audio could be quite noisy and crackly when downsampling by very small factors.</li>
<li>Made optimizations to the PC ADPCM and 8-bit sound mixers.</li>
<li>Added a workaround in the PC Miles timer code for buggy motherboards that advance the QueryPerformanceCounter incorrectly under heavy loads. Also added a check to prevent the timer from ever running backwards.</li>
<li>Fixed a bug in PC Miles where you couldn't restart Miles with the quick API.</li>
<li>Fixed a bug where AIL_quick_ms_length wouldn't return the correct length unless the sound was playing.</li>
<li>Added a few changes to the RIB subsystem so that RIBs are reference counted.</li>
<li>Used the special exception code on NT to label the Miles background threads (easier to see what threads belong to Miles).</li>
<li>Fixed a bug in the PC timer code where if you released a timer inside a timer callback, the callback might be called again.</li>
<li>Fixed a bug when playing waveOut audio on NT4 with an SBLive where the sound would skip and stutter.</li>
<li>Fixed a bug when playing waveOut audio and you released and then reacquired the digital sound handle.</li>
<li>Added support for overriding the Miles memory allocation routines under Win32.</li>
<li>Fixed a bug where the Miles Sound Studio would crash on a MIDI or DLS Dump.</li>
<li>Fixed a crash bug in the RSX provider when shutting down while running on waveOut drivers.</li>
</ul>
<h1>Changes from version 6.1a to 6.1b (09-06-2001)</h1>
<ul>
<li>Mac MP3 decoder has been completely rewritten in PPC assembly. It is 20% faster than the old decoder.</li>
<li>Switched to a shorter mix-ahead for lower latency on the Mac.</li>
<li>Fixed a crash when streaming very short MP3 files on the Mac.</li>
<li>Fixed a rare crash when streaming files on the Mac.</li>
<li>Fixed a crash in the MIDI to XMIDI converter on the Mac.</li>
</ul>
<h1>Changes from version 6.0m to 6.1a (03-06-2001)</h1>
<ul>
<li>First official MacOS version! PC and Mac versions fully synched.</li>
<li>All new sound mixers - in some cases up to 3 times faster! Also includes much higher quality resamplers (fully linearly interpolated vs. approximate).</li>
<li>Fixed crash when running under waveOut.</li>
<li>More tolerant of bad MP3 data (keep playing whenever possible and fewer potential crashes).</li>
<li>Fixed a bug in the Miles Fast 2D and Dolby Surround providers where some samples beyond the maximum distance never finish playing.</li>
<li>Added the AIL_set_async_file_callbacks function. This allows you to replace the file IO functions used by the streaming API using asynchronous IO (usually only used on MacOS or Win NT).</li>
<li>Plain MP3 files inside of a packed file can now be opened by the streaming API without having to wrap a wave header around the data. To do this, pass in the file handle as you would normally do only now add a comma, followed by the length of the MP3 data. For example, if you wanted to stream out of file handle 5, for 32768 bytes, use "\\\\5,32768".</li>
<li>Fixed a bug in the voice chat client example where the application could crash on opening.</li>
<li>Fixed a bug in the exporting of the AIL_update_3D_position and AIL_auto_update_3D_position functions.</li>
<li>Miles no longer includes pre-built 16-bit Windows DLLs - they must be built on the developer's machine (mainly because the 16-bit Microsoft C compiler doesn't work on my Win2K machine any longer).</li>
</ul>
<h1>Changes from version 6.0k to 6.0m (11-12-2000)</h1>
<ul>
<li>All new documentation - includes online and offline versions!</li>
<li>Most examples have been rewritten to make them easier to understand.</li>
<li>Added the AIL_open_digital_driver/AIL_close_digital_driver and AIL_open_XMIDI_driver/AIL_close_XMIDI_driver functions. These functions work on all Miles platforms and should now be used instead of AIL_waveOut* and AIL_midiOut* which were Windows-only and are now deprecated.</li>
<li>Miles now allows all ASI formats to wrapped in a wave file. Each ASI exports a wave format tag that tells Miles what ASI decoder to use.</li>
<li>Renamed the AIL_DLL_verion function to AIL_MSS_version.</li>
</ul>
<h1>Changes from version 6.0J to 6.0k (10-22-2000)</h1>
<ul>
<li>MP3 streams no longer cause audio artifacts at the wrapping of a sub-block.</li>
<li>The current playback position in an MP3 stream is now correctly reported after a sub-block loop seek.</li>
<li>Made the MP3 decoder more tolerant of bad MP3 streams.</li>
<li>Renamed the AIL_input_info function to AIL_get_input_info.</li>
</ul>
<h1>Changes from version 6.0i to 6.0J (10-04-2000)</h1>
<ul>
<li>Added the AIL_set_file_callbacks function. This allows you to replace the file IO functions used by the streaming API and AIL_file_read.</li>
<li>Added the AIL_set_stream_processor and AIL_set_DLS_processor filter installation functions.</li>
<li>Fixed a couple stream API deadlock/crash possibilities (when running in a multithreaded game).</li>
<li>Fixed an atexit link warning when building with the non-static C runtime or a non-Microsoft C compiler.</li>
<li>Fixed a tricky DLS timer aliasing bug when running under Win2K.</li>
<li>Changed the size parameters to AIL_extract_DLS to be U32s instead of S32s.</li>
</ul>
<h1>Changes from version 6.0h to 6.0i (08-17-2000)</h1>
<ul>
<li>Made MSS const-clean! Most source files changed to handle the new const action.</li>
<li>Fixed a shutdown crash when starting up and shutting down the system multiple times while streams are playing.</li>
<li>Fixed a crash in the mono delay, stereo delay and reverb 1 filters where memory was freed out of order.</li>
<li>Fixed a granularity problem when seeking with milliseconds in an uncompressed sound stream.</li>
<li>Fixed the sub-block looping on streams to allow -1 for the end of the stream.</li>
<li>Limited waveOut latency to more reasonable maximum values - should have much lower latency on NT 4 with newer sound cards.</li>
<li>Renamed the internal STREAM_TYPE structure to avoid collisions in the MMSYSTEM.H Windows header file.</li>
<li>Added the new function RIB_find_files_provider which allows you to search for multiple file formats at once (when you need a specific input and output format, for example).</li>
</ul>
<h1>Changes from version 6.0g to 6.0h (06-08-2000)</h1>
<ul>
<li>Improved the streaming playback performance when multiple streams are playing at once or when playing a stream that comes close to fully exhausting the IO bandwidth of the streaming device.</li>
<li>Force call to AIL_shutdown from an atexit handler to insure Miles is always closed.</li>
<li>Lock far fewer Miles functions for better performance on multiple CPU machines.</li>
<li>Fixed a crash problem in the console applications if you hit Control-Break to exit.</li>
<li>Internally meter AIL_serve checks so that the buffer status is only checked every 10 ms.</li>
</ul>
<h1>Changes from version 6.0f to 6.0g (06-01-2000)</h1>
<ul>
<li>Tweaked all of the software EAX settings to much closer match hardware EAX.</li>
<li>Fixed setting the playback position on very short streams.</li>
<li>Fixed a crash in AIL_set_DirectSound_HWND if a hardware 3D provider is installed.</li>
<li>Fixed a crash when closing the input API under Windows 2000.</li>
<li>If no default HWND is found, MSS now uses the current foreground window with DirectSound (which fixes some problems in NT console windows).</li>
</ul>
<h1>Changes from version 6.0e to 6.0f (04-24-2000)</h1>
<ul>
<li>Removed the Sleep in AIL_serve which could cause Smacker to skip on Windows 2000 when running in waveOut mode.</li>
</ul>
<h1>Changes from version 6.0d to 6.0e (04-20-2000)</h1>
<ul>
<li>Changed AIL_stream_close to not shutdown the background thread (which, under Windows 98 in the debugger, takes so long that the sound can skip). The stream servicing thread is now closed at shutdown time.</li>
<li>Re-validate the HWND when re-opening a digital device (to work around a bug in the SBLive drivers which crashed on an invalid HWND).</li>
</ul>
<h1>Changes from version 6.0c to 6.0d (03-21-2000)</h1>
<ul>
<li>Fixed a really-well hidden bug that could cause the MP3 *encoder* to lock up when the FPU state was set to a non-default mode.</li>
<li>Fixed a deadlock that could occur when closing a stream on a multiple CPU machine.</li>
<li>Fixed the background of some of the controls in the sample apps under Win2K.</li>
<li>Fixed a crash in the RSX provider when setting the velocity before setting the sample's audio data.</li>
</ul>
<h1>Changes from version 6.0b to 6.0c (02-21-2000)</h1>
<ul>
<li>Fixed a deadlock that could occur when closing a stream.</li>
<li>Made looping MP3 streams loop a little cleaner.</li>
<li>Fixed a deadlock that could occur when starting a 3D sample from the background timer thread.</li>
<li>Added AIL_close_input call to voice chat client example program.</li>
<li>Fixed an obscure bug in the RIB provider enumeration functions.</li>
<li>Fixed a problem when setting the orientation of a H3DSAMPLE before calling AIL_set_3D_sample_file.</li>
</ul>
<h1>Changes from version 6.0a to 6.0b (01-15-2000)</h1>
<ul>
<li>Made the Exam3D example always reset the effects level to 1.0F after a switch. Fixes not being able to hear reverb on some EAX drivers.</li>
<li>Changed the Miles voice chat examples to use a less commonly used port number to lessen the chance of possible conflicts.</li>
<li>Fixed the Miles Sound Studio occasionally using the voice chat encoder instead of the MP3 encoder.</li>
<li>Switched to a new threading model that should be more robust with poor sound card drivers and other libraries that use DirectSound concurrently with Miles (you shouldn't have to call AIL_lock anymore). The new threading model can be turned on and off with the new AIL_MUTEX_PROTECTION preference (default is on).</li>
<li>Fixed a few harmless BoundChecker warnings.</li>
<li>Should be fewer skips in the 2D system when switching 3D providers (this is probably as good as we can make this with the Windows 9x's crummy thread scheduler).</li>
<li>Switched the filters to be compiled with the VC 6 switch "/QIfist" to allow fast floating point to integer conversion, while still giving the compiler good scheduling opportunities.</li>
<li>Updated the Lagrangian Interpolating filter to the correct source file.</li>
<li>Added the new AIL_register_3D_EOS_callback function that allows you to set an end-of-sample callback for 3D samples (added on all 3D providers).</li>
<li>Switched to using the SetEQ function to model occlusions with a hardware low-pass filter on A3D 2 cards (sounds as good as EAX).</li>
<li>Somewhat simplified the threading model in the A3D 2 and QSound providers (should be a little quicker when starting or stopping sounds).</li>
<li>Simplified the threading model in the RSX provider drastically (should respond more quickly).</li>
<li>Fixed a crash if you changed an A3D 2, EAX 2, or Miles fast 2D settings before calling AIL_set_3D_sample_file.</li>
<li>Fixed a problem with the Fast 2D provider where the low-pass filter could be dropped when replaying the same sound.</li>
<li>Automatically invert minimum and maximum distances if they are passed in backwards.</li>
<li>Fixed the 2D streaming system to handle corrupt or unsupported MP3 files without crashing.</li>
<li>Fixed the 2D streaming system to automatically close all playing streams when calling AIL_waveOutClose or AIL_shutdown (avoids a shutdown crashes).</li>
<li>Fixed a nasty crash bug when re-using 2D samples or 3D samples in the Fast 2D provider where an applied DSP filter could go uninitialized.</li>
</ul>
<h1>Changes from version 5.0r to 6.0a (10-18-2000)</h1>
<ul>
<li>Switched to a new directory structure to better handle the upcoming multi- platform support (see ReadMe.Txt for details).</li>
<li>Added new voice chat codecs and an new client-server system to show it off (MSSChat.EXE). Since Miles doesn't supply a network layer, our example uses TCP for its transport. Games should add the voice packets into their existing network layers for best results.</li>
<li>Added a new input API for recording digital audio.</li>
<li>Added new set of 18 DSP-style digital audio filters. Low-pass, high-pass, equalizers, reverb, EAX emulation with occlusion and more!</li>
<li>Changed the AIL_set_3D_sample_distances function to only take one set of minimum and maximum parameters (none of the providers except RSX supported different front and back distances). You'll have to make a change to your code to handle for this change.</li>
<li>Added new 3D functions to set the room type, speaker type, sample effects level, sample obstruction, sample occlusion, and conical emission for samples (see the new Exam3D.exe for examples of all of these functions).</li>
<li>Added three new DirectSound 7 only 3D providers - full HRTF, light HRTF, and pan and volume only. You must have DX7 installed to use these providers.</li>
<li>Added a new EAX2 provider with hardware support for occlusions and obstructions. All of the advanced settings are available as provider and sample level attributes and preferences.</li>
<li>The Miles Fast 2D and Dolby providers now offer software emulation of the EAX room styles. These providers also use a low-pass filter to support occlusions. Use this functionality with care - each voice with EAX effects costs 7% of the CPU on a P5/200.</li>
<li>Added a new function to set the directory that contains all of the Miles redistributable files (ASIs, M3Ds, FLTs, etc). Just call AIL_set_redist_directory *before* AIL_startup to tell Miles where to find its files.</li>
<li>Upgraded all of the existing 3D providers to support occlusions and obstructions by simulating them by adjusting the sample volume.</li>
<li>Added a new A3D2 provider - you can request the A3D2 interface and download geometry or use our new EAX reverb emulation (we create geometry on the fly that matches the EAX room styles as closely as possible).</li>
<li>Added a new QMixer provider (which cannot be redistributed without a license from QSound - give Mitch a call for details). This provider creates a nice, sweet 3D sound - definitely worth checking out.</li>
<li>Added sub-block looping of streamed files.</li>
<li>Added normal doppler effects to RSX (not based on changing positions, but rather by the 3D velocity function).</li>
<li>Removed support for the Microsoft mixer in our DirectSound support (since there wasn't any reason to use their's any more). This means that the DIG_USE_MSS_MIXER preference is gone now.</li>
<li>Made the DOS examples compile under Win32 or DOS - now stored in a CONSOLE directory.</li>
<li>Made the Miles Sound Studio resizable under Win 98 and Win NT.</li>
<li>Fixed burst of static when running under DX7 with the debug libraries.</li>
<li>Pre-normalize the 3D orientation before passing it into M3D providers.</li>
<li>Fixed tons of other small bugs.</li>
</ul>
<h1>Changes from version 5.0q to 5.0r (09-22-1999)</h1>
<ul>
<li>Fixed a rare deadlock crash when using multiple DirectSound buffers (like when using Smacker and Miles together or when using the 3D DirectSound hardware provider with 2D sounds).</li>
<li>Fixed a memory fragmentation problem under DOS.</li>
<li>Allow more 3D voices on Aureal cards.</li>
</ul>
<h1>Changes from version 5.0p to 5.0q (09-06-1999)</h1>
<ul>
<li>Improved DirectSound buffering to help skipping under heavy loads and crummy DirectSound drivers. Added a new preference that allows you to control how far in advance to mix ahead. Use DIG_DS_MIX_FRAGMENT_CNT to control how many fragments to mix ahead (defaults to eight 8 ms fragments).</li>
<li>Improved the panning routines in the Fast 2D 3D provider - should pan from side to side much more smoothly now.</li>
<li>Fixed a rare waveOut deadlock problem.</li>
<li>Worked around some A3D stability problems.</li>
<li>Added a new function to determine the slowest timer response since Miles was started. Just call AIL_get_timer_highest_delay to get the worst time (0 means the system is running perfectly). The mixing system will start to skip when this number exceeds 64 ms. If this happens in your application, you can use the new preference DIG_DS_MIX_FRAGMENT_CNT to increase the mix ahead time (at the expense of latency).</li>
<li>Fixed the EAX constant for flipping back to automatic sample reverb control.</li>
<li>Fixed MMX support (goofy bug).</li>
<li>Fixed callback on preloaded HSTREAMs.</li>
<li>Changed the type of H3DSAMPLEs to be not defined to an (void*) pointer to enable better compile time type checking.</li>
<li>Fixed a bug when a NULL was passed to the red book routines.</li>
<li>Cleaned up the Delphi interface files somewhat.</li>
<li>Fixed AIL_allocate_file_sample to accept an MP3 file.</li>
<li>Made all of the ADPCM routines fail on non-4 bit IMA ADPCM compressed data.</li>
<li>Fixed the floating point status not being saved in a DOS timer callback.</li>
<li>Made the RSX provider consider only the minimum distance (not scaled by the maximum) for volume attenuation.</li>
<li>Turned on doppler pitch shifting under RSX.</li>
<li>Fixed a bug in the XMIDI sequencer where channel mutes weren't being handled properly with callback prefix functions (whew).</li>
</ul>
<h1>Changes from version 5.0n to 5.0p (04-25-1999)</h1>
<ul>
<li>Made the MP3 parser more tolerant of files with bogus pre-header data.</li>
<li>Added compatibility with variable bit-rate MP3 files to the MP3 decoder.</li>
</ul>
<h1>Changes from version 5.0m to 5.0n (04-20-1999)</h1>
<ul>
<li>Fixed the RSX provider dropping voices when playing multiple samples through a H3DSAMPLE in close succession.</li>
</ul>
<h1>Changes from version 5.0k to 5.0m (04-09-1999)</h1>
<ul>
<li>Added a new optimized assembly MP3 math module for Intel and AMD 3DNow - up to 10% better on Intel, 54% better on AMD! Miles is now by far the fastest MP3 decoder on AMD machines.</li>
<li>Fixed a granularity problem when seeking in a non-compressed stream using AIL_set_stream_ms_position.</li>
<li>Fixed a crash if you called AIL_shutdown when 3D samples were still playing.</li>
<li>Fixed an RSX startup crash when running under the MSVC debugger under NT.</li>
<li>Allocated service threads for 3D samples at sample-allocation time vs. provider-open time.</li>
</ul>
<h1>Changes from version 5.0i to 5.0k (03-31-1994)</h1>
<ul>
<li>Made the "Maximum supported samples" provider attribute also a *preference* in the Fast2D, Dolby Surround, and RSX providers. This means you can set the number of available 3D samples in these three providers by calling the AIL_set_3D_provider_preference function *before* you call the AIL_open_provider function. For the Fast2D and Dolby provider, you need to also insure that their are enough 2D HSAMPLEs available for the number of 3D H3DSAMPLEs that you request (use the DIG_MIXER_CHANNELS Miles preference to set the number of 2D HSAMPLEs).</li>
<li>Made AIL_set_3D_sample_distances and AIL_3D_sample_distances take F32-typed parameters rather than U32.</li>
</ul>
<h1>Changes from version 5.0h to 5.0i (03-06-1999)</h1>
<ul>
<li>Fixed a bug in the DLS software synth that would crash if you looped a single MIDI file for more than 71 minutes.</li>
</ul>
<h1>Changes from version 5.0g to 5.0h (02-25-1999)</h1>
<ul>
<li>Fixed a crash bug when closing the RSX 3D audio provider if legacy RSX had never been previously installed.</li>
<li>Fixed a new parameter names to avoid collisions with the STL.</li>
</ul>
<h1>Changes from version 5.0f to 5.0g (02-15-1999)</h1>
<ul>
<li>Changed the calling convention of the RIB-based providers slightly (M3Ds, ASIs, and FLTs). Make sure you update *all* of your MSS files - not just MSS32.DLL!</li>
<li>Added the new Dolby Surround M3D provider. This is a Dolby-certified run-time 3D positioner. It allows multi-speaker systems like those from Cambridge Soundworks, Boston Acoustics, and Altec Lansing to play sounds audio from the rear speakers - "true" 3D sound positioning.</li>
<li>Added a new filter called "CAPTURE.FLT". This filter writes all Miles digital audio output to a specified wave file. This lets you create complete sound tracks for your running applications! You simply set the filename and then load the filter to begin recording your application's output.</li>
<li>Further support has been added to the standard HSAMPLE-based API for installable digital audio processor modules, or "filters." Filters allow the manipulation of sample data in real time, just before it is mixed into the driver's output buffer. Several new API functions have been added to make it easy for applications to select, install, configure, and use filters.</li>
<li>The use of these new functions is demonstrated in the FILTER.CPP console application in the FLT directory, along with a simple example filter provider which emulates MSS's reverb support in an externally-installable module.</li>
<li>To associate a filter provider with a given HSAMPLE, simply call the existing AIL_set_sample_processor function with DP_FILTER as the SAMPLESTAGE parameter. It is not necessary to explicitly open the filter with AIL_open_filter first; however, be advised that some filters may need to allocate large amounts of memory or perform CPU-intensive setup processing when first opened. Calling AIL_open_filter at application startup time may help avoid perceptible delays when a given filter is associated with an HSAMPLE for the first time.</li>
<li>Open filters are cleaned up automatically at driver shutdown time. Even if AIL_open_filter is called explicitly by the application, it is not necessary to call AIL_close_filter unless the application needs to free up resources consumed by a filter which it no longer intends to use. Keep in mind that each installed filter may add a small amount of CPU-usage overhead to the MSS digital audio pipeline, even if no HSAMPLEs are using the filter.</li>
<li>Filter support is available only in the Win32 MSS API, and only if the DIG_USE_WAVEOUT or DIG_USE_MSS_MIXER preferences are enabled.</li>
<li>Added the DIG_F_USING_ASI flag in AIL_stream_info flags return parameter.</li>
<li>Increased the number of voices available with RSX to 16.</li>
</ul>
<h1>Changes from version 5.0e to 5.0f (01-31-1999)</h1>
<ul>
<li>Added the new integrated RSX provider (RAD acquired RSX in January 1999). You can now use the RSX provider without installing RSX first! There were many improvements made to improve quality and compatibility. Be sure to try this new provider - it is now one of the best 3D options!</li>
<li>Fixed a bug in the Fast 2D M3D provider where the default volume level could be set incorrectly.</li>
<li>Dropped the volume by 3 db when the sound is behind you in the Fast 2D M3D provider.</li>
<li>Improved the speed of stopping 3D samples in the DirectSound3D derived 3D providers.</li>
</ul>
<h1>Changes from version 5.0d to 5.0e (01-01-1999)</h1>
<ul>
<li>Fixed a bug when opening a normal wave file with the streaming API (introduced by the support for wave-wrapped MP3 files).</li>
</ul>
<h1>Changes from version 5.0c to 5.0d (12-20-1998)</h1>
<ul>
<li>Add a 3D provider that uses the Miles 2D interface (pitch/pan/volume) for extremely fast simulated 3D audio.</li>
<li>Fixed a lock-up bug in the MP3 parser where certain non-MP3 data blocks could cause a crash.</li>
<li>Reduced the speaker static when loading and unloading 3D providers.</li>
<li>Added support for wave wrapped MP3 files in the high-level API (both file name and file handle based).</li>
<li>Fixed a bug where the end of 3D digital sample could be clipped off.</li>
<li>Fixed a bug when selecting a non-A3D provider after the A3D provider.</li>
<li>Forced RSX not to use MMX (which was the cause of the awful clipping noise).</li>
</ul>
<h1>Changes from version 5.0b to 5.0c (11-15-1998)</h1>
<ul>
<li>Added software reverb to the digital API. You can now set reverb parameters on any sample, stream, quick handle, or soft-synth MIDI sequence. The new functions allow you to set the reverb level (amount of reverb), reverb decay time, and reverb reflection time. See the Miles Sound Player for an example of the reverb parameters.</li>
<li>Fixed a few problems in the Delphi interface.</li>
<li>Added SBLive info in the driver list (uses the SB16 driver).</li>
<li>Fixed a bug in the file-based MP3 decompressor where the channels and bits were inverted in the output wave header.</li>
<li>Added hardware DLS support for the Aureal Vortex chipset (both Vortex 1 and Vortex 2). Also added hardware DLS selections to the Miles Sound Player.</li>
<li>Fixed some thread synchronization problems in the 3D providers.</li>
<li>Added a DOS without MPEG library.</li>
</ul>
<h1>Changes from version 5.0a to 5.0b (10-19-1998)</h1>
<ul>
<li>This is a maintenance release. The .M3D 3D hardware providers have changed, so be sure to update any copies you currently keep in your application directory.</li>
<li>Added AIL_set_3D_sample_info, to allow direct specification of a block of raw sample data via an AILSOUNDINFO structure.</li>
<li>Added AIL_set_3D_sample_playback_rate and AIL_3D_sample_playback_rate functions to allow on-the-fly control of a 3D sample's playback rate. Note that some hardware 3D providers may not respond well to increasing a sample's playback rate. 3D effects may be lost, or other samples may be cut off, if an increase in a sample's playback rate causes additional DSP resources to be consumed.</li>
<li>Added three functions for per-sample attribute control in the 3D sound API. AIL_enumerate_sample_attributes, AIL_3D_sample_attribute, and AIL_set_3D_sample_preference allow per-sample attributes to be listed, read, and written, respectively.</li>
<li>Some 3D providers (notably Creative EAX at this time) allow control of parameters such as effect intensity on a per-voice basis. On the Creative EAX provider (MSSEAX.M3D), the new per-sample attribute functions will expose "EAX sample reverb mix", which can be read with the AIL_3D_sample_attribute function or written with the AIL_set_3D_sample_preference function.</li>
<li>Most applications should not need to set the "EAX sample reverb mix" preference. If an EAX application creates a sample and does not set this property, EAX automatically calculates the reverb mix for the sound source based on its volume and distance. If an application does want to override EAX's control of this attribute, its value may be varied over the range of 0.0 (no reverb at all added to the source) to 1.0 (the maximum amount of reverb added to the source). If you want to put the reverb mix attribute back under the control of EAX, you can set the value using the constant EAX_REVERBMIX_USEDISTANCE, defined in EAX.H as -1.0F.</li>
<li>Fixed a bug which could potentially cause deadlocks when setting or retrieving EAX environment properties.</li>
<li>Fixed a truncation problem in the AIL_find_DLS function.</li>
<li>Fixed a bug in the end of stream callback.</li>
<li>Updated the Delphi interface files to 5.0.</li>
</ul>
<h1>Changes from version 4.0g to 5.0a (10-04-1998)</h1>
<ul>
<li>Major new version - almost everything changed somewhat. Highlights:</li>
<li>All new digital mixer (actually the digital mixer from our DLS synthesizer) - it is much faster, has MMX support, supports on-the-fly filtering, and can call pre- and post- mix sound processors.</li>
<li>MSS now uses the new Miles mixer even when running under DirectSound - if you start and stop many sound samples, then this can increase your performance dramatically.</li>
<li>New API for adding runtime bound APIs to MSS (called RIB).</li>
<li>New API for adding audio codecs to MSS called "ASI" (which is built with RIB).</li>
<li>New API for adding 3D audio providers to MSS called "M3D" (which is also built on RIB).</li>
<li>New MPEG Layer-3 ASI-based decoder (note that you must sign a license addendum to obtain the decoder). MP3 is integrated completely into MSS - you don't even have to decompress the MP3 data first (although you can for performance reasons). MSS does NOT support MPEG Layer 1 or MPEG Layer 2 files, btw.</li>
<li>New high-level 3D API - with the MSS 3D API, you can support any of the Miles M3D audio providers (DirectSound software, DirectSound hardware, Aureal's A3D, Creative's EAX, and Intel's RSX - more coming soon). Note that Intel is currently working on several bugs in RSX, so the RSX provider is noisier than it will be.</li>
<li>New API for high-level access to the Miles mixer. This means you can do format conversions and pre-mixing in your application (without actually playing the sound).</li>
<li>New functions for compressing and decompressing with an ASI codec. Note that Miles does NOT supply a redistributable MPEG Layer 3 *encoder*. You can purchase a encoder for use with the Miles Sound Studio for $95, but it is still not redistributable.</li>
<li>The DLS synthesizer is now capable of using MP3 compression for the instrument data. This makes MSS MIDI files even smaller! You must purchase the Miles MPEG Layer 3 encoder to create these files, however.</li>
<li>Added a callback to most of the File Format services functions that is called periodically during lengthy operations (for status displays).</li>
<li>New function to write out a wave file from just a memory pointer and format description.</li>
<li>Improved autodetection of application master HWND.</li>
<li>New function to retrieve the HWND that the MSS system is using (for DirectSound and 3D library support).</li>
<li>Fixed the default pan setting for drum voices in the DLS synthesizer.</li>
<li>Stream callbacks are now made when the sound completes (rather than when all of the audio has been read from the file).</li>
</ul>
<h1>Changes from version 4.0f to 4.0g (06-11-1998)</h1>
<ul>
<li>Fixed a bug when looping ADPCM sound streams.</li>
<li>Fixed some Win32s problems.</li>
<li>Fixed a bug where end of stream callbacks would only be made once.</li>
</ul>
<h1>Changes from version 4.0e to 4.0f (06-03-1998)</h1>
<ul>
<li>Fixed use of greater than 1MB DLS files under Windows 3.x.</li>
</ul>
<h1>Changes from version 4.0d to 4.0e (05-10-1998)</h1>
<ul>
<li>Fixed an obscure buffer boundary bug in the ADPCM decompressor.</li>
</ul>
<h1>Changes from version 4.0c to 4.0d (03-30-1998)</h1>
<ul>
<li>First release of the DOS version of MSS 4.</li>
<li>Fixed the stream millisecond positioning functions.</li>
<li>Merged a lot of the Windows and DOS source code.</li>
<li>Shipped the newest S3BASE.DLL in the WinTools directory (adds from memory loading for SonicVibes cards).</li>
<li>New DOS driver for the ESS AudioDrive (runs better under a Win95 DOS box).</li>
<li>Added DOS driver for the Maxi Sound 64 sound card.</li>
<li>Updated Delphi interface files to version 4.0.</li>
<li>Fixed a bug in the DLS synthesizer with some of the weirder DLS instruments.</li>
</ul>
<h1>Changes from version 4.0b to 4.0c (03-20-1998)</h1>
<ul>
<li>Doubled the speed of ADPCM decompression.</li>
<li>Fixed ADPCM mono samples playing without volume control.</li>
<li>First release of the Win16 version of MSS 4.</li>
<li>Dumped the use of the Shrinker DLL compressor - all kinds of loading problems.</li>
<li>Fixed a few compiler warnings in MSS.H.</li>
</ul>
<h1>Changes from version 4.0a to 4.0b (03-09-1998)</h1>
<ul>
<li>MSS now uses a single header file for all platforms: MSS.H</li>
<li>First release of the Win32 SDK.</li>
<li>Miles Sound Studio: easy-to-use utility for manipulating MIDI, XMIDI, DLS, and digital sound files.</li>
<li>New native Win32 version of MIDI Echo.</li>
<li>New Tools API - convert MIDIs to XMIDIs, compress/decompress ADPCM files, DLS file handling functions, etc. The Miles Sound Studio was written with these functions.</li>
</ul>
<h1>Changes from version 3.6f to 4.0a (02-24-1998)</h1>
<ul>
<li>DLS support: high and low-level APIs, a bunch of new utilities, MMX and non-MMX support.</li>
<li>ADPCM compression support: on-the-fly compression in the sound mixer, file compression and decompression APIs, and support for DLS sample compression.</li>
<li>Miles Sound Player - new application to play MIDI/XMIDI (with and without DLS installed), and digital sound files.</li>
<li>New time-based positioning functions for both sequences and samples (current position, total length, and seek).</li>
<li>Quick API additions: DLS support, time position, normal MIDI file support.</li>
</ul>
<h1>Changes from version 3.6e to 3.6f (11-07-1997)</h1>
<ul>
<li>Changed the Quick API to attempt to load the MIDI driver after the digital driver (instead of before) to work around Creative Labs MIDI drivers that attempt to allocate the digital driver for software music synthesis.</li>
<li>Made quite a few low-level changes to the MIDI sub-system for the DLS support coming in version 4.0.</li>
<li>Decreased the delay in the MIDI traffic when ending a MIDI sequence.</li>
<li>Fixed an open bug in the MSS Xtra.</li>
</ul>
<h1>Changes from version 3.6d to 3.6e (10-20-1997)</h1>
<ul>
<li>Now use the DSBCAPS_GETCURRENTPOSITION2 flag to work a little better with emulated DirectSound drivers.</li>
<li>Added a function called AIL_set_DirectSound_HWND that will allow you to explicitly set the HWND of your application. Call this function after AIL_waveOutOpen.</li>
<li>Fixed a few bugs in the Miles Xtra with opening digital audio cast members.</li>
<li>Fixed a bug in the Miles Xtra in the positioning command for streaming audio.</li>
<li>Fixed a crash when there was no event callback installed and an AIL_send_channel_voice_message call was issued with no sequence handle specified.</li>
</ul>
<h1>Changes from version 3.6c to 3.6d (08-25-1997)</h1>
<ul>
<li>Fixed a bug in AIL_minimum_sample_buffer_size that causes stuttering in the streaming API under DirectSound when the sound format didn't match the DirectSound output format.</li>
</ul>
<h1>Changes from version 3.6b to 3.6c (06-08-1997)</h1>
<ul>
<li>Fixed bug in the streaming API under Win32 where some wave files wouldn't open.</li>
</ul>
<h1>Changes from version 3.6a to 3.6b (03-07-1997)</h1>
<ul>
<li>Fixed bug in waveOut mixing code that could cause all sounds to stop under very high sound loads.</li>
<li>Fixed bug in red book volume control for CD devices that allowed stereo volume resolution.</li>
<li>Fixed some debug stuff that was left in the Quick example application.</li>
<li>Switched the newest Causeway (which works around a bug in the Ensoniq VIVO drivers).</li>
<li>Fixed a bug if you called AIL_start_sample or AIL_load_sample_buffer from an EOB or SOB callback (EOS and timer callbacks were fine).</li>
<li>MSS doesn't look for the application hwnd in AIL_digital_handle_reacquire again - it just uses the old one.</li>
</ul>
<h1>Changes from version 3.5f to 3.6a (01-25-1997)</h1>
<ul>
<li>Added a new high-level streaming API - stream disk files in 4 calls! Streams work just like samples - you can change the playback rate, volume, pan, loop count, etc.</li>
<li>Updated the timer system to work around the dreaded Microsoft VC debugger problem under Windows 95 and Windows NT (slowdowns and crashes when sitting on a breakpoint for a long time).</li>
<li>Added volume control functions for redbook audio (AIL_redbook_volume and AIL_redbook_set_volume). Uses MSCDEX for DOS, the mixer API for Win32, and the aux device calls for Win16.</li>
<li>Fixed a bug in the DOS redbook control functions that would sometimes cause a redbook track not to play (good catch - BullFrog!)</li>
<li>Integrated the Fatman's General MIDI FM patches directly into the library.</li>
<li>Added a new function to duplicate an existing quick handle (AIL_quick_copy). This function doesn't duplicate the audio memory - only the handle info.</li>
<li>Added two new functions to control the speed and volume of a quick handle (AIL_quick_set_speed and AIL_quick_set_volume).</li>
<li>Added a new function to return the digital and MIDI driver handles when you used the Quick API to init the system (AIL_quick_handles). This is handy because you can now use AIL_quick_startup to simplify initializing MSS, and still use the full API for everything else.</li>
<li>Fixed a bug in AIL_strnicmp that was causing a crash when loading data out of a 32-bit resource DLL file.</li>
<li>The MSS DLLs now check to see if they have been incorrectly installed in Windows or Windows system directory.</li>
<li>Added the AIL_get_preference function to the DOS API.</li>
<li>Took out the virtual memory feature of VTOR - use the Smacker utilities to convert huge wave files to RAWs.</li>
<li>Fixed a bug in AIL_file_read when an pointer was passed and the read failed.</li>
<li>Fixed a bug in AIL_file_write that would free the pointer if the write failed.</li>
<li>Fixed a bug in the quick API where the MIDI system occasionally fail to load under NT.</li>
<li>Various minor clean-ups in the Delphi interface units.</li>
</ul>
<h1>Changes from version 3.5e to 3.5f (10-22-1996)</h1>
<ul>
<li>Adjusted the method that the 16-bit DLL locks its memory for extreme low memory machines (Win3.x and Win32s).</li>
<li>Fixed potential crash when completely out of DOS memory in the 16-bit DLL (Win3.x and Win32s).</li>
<li>Preceded the system functions with "AIL_" to fix function name collisions with VFX from Miles Design. The old function names are still defined to match the new names, so no source should have to be changed. </li>
<li>Because of these function name changes and because Smacker dynamically links to MSS, you must update to at least Smacker version 2.2B for MSS 3.50F.</li>
</ul>
<h1>Changes from version 3.5d to 3.5e (08-18-1996)</h1>
<ul>
<li>Fixed bug in release/reacquire code for DirectSound.</li>
<li>Added new ESS drivers - now run under Win95 DOS box.</li>
</ul>
<h1>Changes from version 3.5c to 3.5d (09-14-1996)</h1>
<ul>
<li>Fixed unusual problem of DirectSound dropping samples when many samples are played at once.</li>
<li>Improved method that the background task uses for CPU-sharing, so that it is slightly faster.</li>
<li>Fixed bug in MIDI driver loading code - seen with Gravis driver & MidiForm.</li>
</ul>
<h1>Changes from version 3.5b to 3.5c (08-22-1996)</h1>
<ul>
<li>Added locking calls for volume and pan setting in the DirectSound code.</li>
<li>Added AIL_digital_handle_release and AIL_digital_handle_reacquire for focus control under Windows.</li>
<li>Added AIL_MIDI_handle_release and AIL_MIDI_handle_reacquire for focus control under Windows.</li>
<li>Added SMP_PLAYINGBUTRELEASED and SEQ_PLAYINGBUTRELEASED flags for HSAMPLE and HSEQUENCE status flags.</li>
<li>Added new macro, "AIL_DLL_version", to return the current DLL version (doesn't actually call into the DLL, so it is always safe).</li>
<li>Fixed weirdness with the background task complaining about Bad Code Pointers.</li>
<li>Changed the way AIL_redbook_status works to speed it up.</li>
<li>Added AIL_serve calls in the redbook API to avoid stutters on slow CDs.</li>
<li>Changed standard types (S8, U8, etc) slightly (to defines)</li>
<li>Under DirectSound, you can now pass NULL for the lpFormat parameter - this tells MSS not to adjust the primary sound buffer.</li>
</ul>
<h1>Changes from version 3.5a to 3.5b (07-07-1996)</h1>
<ul>
<li>DOS version now has all of the features of the Windows version (red book support, quick-integration API, sub-block looping, etc).</li>
<li>Fixed error in linked list code of the quick API for Windows.</li>
<li>Fixed error in AIL_send_channel_voice_message when the driver handle is NULL.</li>
<li>Changed AIL_ms_count to call QueryPerformanceCounter under NT.</li>
<li>AIL_ms_count under DOS inside a Windows DOS box can read the Windows timer for millisecond accuracy.</li>
<li>Added "FILE_READ_WITH_SIZE" flag to FILE_READ function, so that it can return the size of the data read as the first four bytes of the returned pointer.</li>
<li>AIL.LIB can be used for register or stack based programs (there is no need to recompile for stack based programs anymore).</li>
<li>MSS can now be used with Watcom 9.5 to 10.6. RAD recommends version 10.6.</li>
<li>Added new AIL_set_driver_directory function to load drivers, .INI files, and patch files from alternate directory (MSS still always searches the current directory first).</li>
<li>You must now call AIL_startup before any other MSS calls (including FILE_read, MEM_alloc, etc).</li>
<li>Callbacks are now typed and must use the AILCALLBACK calling convention.</li>
<li>Added two new redbook functions. AIL_redbook_track returns the current playing track number. AIL_redbook_retract closes the CD drive door.</li>
<li>Timer callbacks now synchronize the callback frequency to AIL_ms_count. This improves MIDI playback drastically under DOS inside a Windows DOS box. It also prevents long-term timer counting drift if you use MSS timer to track time (use AIL_ms_count directly for best accuracy).</li>
<li>DDK has been integrated into the SDK for convenience.</li>
<li>All example programs and tools have been bound with the Causeway DOS extender.</li>
<li>Added new DOS drivers for the AMD Interwave and the NVidia multimedia card.</li>
<li>The VBL flag no longer used for delaying (in either the library or the drivers).</li>
<li>SetSound can display the current Windows 95 configuration when running in a Windows 95 DOS box.</li>
<li>Built-in Borland C support for both Windows and DOS PowerPack.</li>
<li>SoundFont support now supplied directly with MSS.</li>
<li>AILEXPORT has been renamed to AILCALLBACK for consistency with DOS.</li>
<li>Renamed main libraries and header to use MSS instead of AIL.</li>
<li>VTOR uses virtual memory so that large .WAVs or .VOCs can be converted. Under Windows and Windows 95 DOS boxes, virtual memory is limited to 16 MB, so you may have to run VTOR under normal DOS to convert really huge files.</li>
<li>Added 16- and 32-bit Delphi interface units.</li>
</ul>
<h1>Changes from version 3.04a to 3.5a (04-11-1996)</h1>
<ul>
<li>Add complete built-in DirectSound support. There are several new DirectSound specific functions - see the docs for details.</li>
<li>AIL_startup can be called multiple times - but calling AIL_shutdown closes everything down immediately. This allows you to call AIL_startup several times in your application, and call AIL_shutdown once in your closing procedure.</li>
<li>Fixed a harmless thread handle leak.</li>
<li>Also fixed is AIL_minimum_sample_buffer_size which was under-reporting by a factor of 4.</li>
<li>Added the new Quick Integration API. See the docs for details.</li>
<li>Added new AIL_digital_configuration call that returns info about the current sound driver.</li>
<li>Added new sub-block looping feature - can loop internal pieces of a buffer. Use the AIL_set_sample_loop_block function to set the loop points.</li>
<li>Callbacks now work under Win32s - but are not called at interrupt time. Rather, they are distributed from the Windows messaging system, so you must yield to Windows to receive callbacks</li>
<li>Added new Red-Book audio interfaces - play CD audio tracks quickly and easily.</li>
<li>Multiple 16-bit and Win32s apps can be loaded at the same time.</li>
<li>Fixed crashes when running 16-bit DLL with other 32-bit apps or libraries.</li>
<li>Fixed crashes when memory would move.</li>
<li>Added new millisecond count call - AIL_ms_count. Allows accurate timing without having to create absurdly fast timers.</li>
<li>Added new starvation call - AIL_sample_buffer_info for video players.</li>
<li>AIL_serve is no longer needed in your message loop. Under Win32, a background thread handles servicing. Under Win16 and Win32s, a background task takes care of it.</li>
<li>MSS now works under Windows NT - (the NT MIDI drivers are still pretty buggy however).</li>
</ul>
<h1>Changes from version 3.03d to 3.04a (02-04-1996)</h1>
<ul>
<li>Integrated Win32s support directly into WAIL32.DLL. This means you can create one executable that supports Win 95, Win NT, and Win32s. To support Win32s, you must distribute both WAIL32.DLL and WAIL16.DLL.</li>
<li>You must use MEM_alloc_lock for memory that you intend to use for sample or sequence data (with AIL_set_sample_address, AIL_load_sample_buffer, AIL_init_sequence, etc). MEM_alloc_lock returns 32-bit pointers that have been locked and fixed for Win32s. Under Win 95 or Win NT, MEM_alloc_lock just returns GlobalAlloc-ed memory, so you can use this function for all environments. If you pass in a pointer that isn't created with MEM_alloc_lock, MSS will display a error message box.</li>
<li>HDIGDRIVER, HSAMPLE, HSEQUENCE, etc, are all handles under Win32s - they are not pointers, so you can't dereference them.</li>
<li>Internal MSS calls are not captured in the debug trace file when running under Win32s.</li>
<li>Callbacks aren't supported yet.</li>
<li>Fixes segment wrap around in WAIL16 on sound cards that need large Windows buffers (>64K).</li>
<li>Marks several variables as volatile, so that WAIL can be compiled with optimizations on.</li>
<li>Pointers are checked for validity as they are freed.</li>
</ul>
<h1>Changes from version 3.03c to 3.03d (11-22-1995)</h1>
<ul>
<li>Switched to a new thread synchronization technique which should fix deadlocking problems previously encountered by some 32-bit MSS applications.</li>
<li>Previous versions of the 32-bit MSS library could crash if an attempt was made to start more than one instance of a MSS application. This has been fixed.</li>
<li>AIL_branch_index could fail to work properly in previous versions of MSS. This problem has been fixed for this release.</li>
</ul>
<h1>Changes from version 3.03b to 3.03c (11-07-1995)</h1>
<ul>
<li>SETSOUND now includes explicit support for the new Yamaha DB50-XG WaveForce(TM) daughterboard via the MPU401.MDI driver.</li>
<li>MSS for Win32 now uses thread synchronization.</li>
<li>If all playing samples had their volume set to 127, it was possible for the AIL_set_digital_master_volume command to fail to control the overall digital output level. This has been fixed.</li>
<li>The SETSOUND installation program did not uninstall drivers after successful detection. This caused no reported problems; however, the message "Out of timer handles" could appear if the user were to select and install any driver more than 16 times. SETSOUND now uninstalls drivers after detection to avoid the possibility of this error message.</li>
<li>The AIL_MDI_driver_type function caused premature termination of debug scripts when the AIL_DEBUG feature was in use. This has been fixed.</li>
<li>Memory past the end of XMIDI files could be accessed by AIL_init_sequence, in cases where XMIDI files smaller than 1024 bytes were played. This caused occasional page faults in the Windows MSS system, but no problems were ever reported in the DOS MSS system. This bug has been fixed, however, in both versions of MSS.</li>
<li>At the end of an unlooped XMIDI sequence, the sequence loop count is now reset to 1. This allows a sequence to be restarted without undesirable looping.</li>
<li>Under certain rare circumstances, unwanted pauses occurred during XMIDI playback when using the FOR/NEXT XMIDI controllers or the AIL_branch_index function. These pauses have been eliminated in this release.</li>
<li>The AIL_end_sequence function previously called the end-of-sequence (EOS) callback function, even if the sequence was already done. This behavior has been corrected.</li>
<li>The Microsoft Windows Sound System driver (SNDSYS.DIG) has been patched to fix a bug that caused a detection problem on some systems, particularly Compaq machines.</li>
<li>The standard Sound Blaster digital driver (SBLASTER.DIG) could cause lockups or "Transfer Stack Overflow" messages during detection when running under Windows 95. This was due to the use of an extremely short DMA buffer to check for auto-init DMA capabilities. In this release, the DMA verification buffer in SBLASTER.DIG has been increased in size to avoid problems. No other drivers, including those for the Sound Blaster Pro and Sound Blaster 16, were affected by this problem.</li>
</ul>
<h1>Changes from version 3.03a to 3.03b (06-29-1995)</h1>
<ul>
<li>Changing the digital master volume level had no effect on samples whose volume level was set to 127. This has been fixed.</li>
<li>A VMM page-locking problem with the FlashTek DOS extender version of MSS has been fixed.</li>
</ul>
<h1>Changes from version 3.03 to 3.03a (06-25-1995)</h1>
<ul>
<li>Sporadic crashes at shutdown time may occur in earlier MSS releases if a sequence handle is allocated with AIL_allocate_sequence_handle but never actually initialized with AIL_init_sequence. This patch corrects this problem, which affected only the MS-DOS versions of MSS.</li>
</ul>
<h1>Changes from version 3.02 to 3.03 (06-18-1995)</h1>
<ul>
<li>Two new drivers, SNDSYS.DIG and ESFM.MDI, provide support for the Microsoft Windows Sound System and ESS Technology ES1688, ES1788, and ES1888 chipsets, respectively. The SETSOUND program recognizes these new drivers by means of an updated AILDRVR.LST file.</li>
<li>Support for the Borland Power Pack and Zortech/Symantec compiler packages is now available. Please note that by default, the MSS system is built for the more popular Watcom/Rational package. To use MSS with any other compiler/DOS extender package, it is necessary to delete all .OBJ, .LIB, and .EXE files and recompile the desired library version. The .MDI and .DIG drivers, as well as the files in the TOOLS subdirectory, do not need to be rebuilt.</li>
<li>Four new functions provide a "master volume" control for all digital samples and XMIDI sequences: AIL_set_digital_master_volume, AIL_set_XMIDI_master_volume, AIL_digital_master_volume, and AIL_XMIDI_master_volume</li>
<li>Please note that like the AIL_set_sequence_volume function, AIL_set_XMIDI_master_volume will not have the desired effect on sequences which do not include MIDI Part Volume controllers (7) at the beginning of each track. Refer to the updated documentation for further information on these functions.</li>
<li>The function AIL_register_beat_callback has been added to allow applications to request callback service at sequence beat transition points. Refer to the description of this function AND the AIL_sequence_position function in the documentation before attempting to use either function!</li>
<li>The function AIL_MDI_driver_type has been added to help applications identify the synthesis technology provided by various MSS drivers. This function may be used to select different XMIDI sequences for various sound synthesis platforms. Refer to the documentation for details.</li>
<li>A new XMIDI controller has been implemented. The XMIDI Channel Mute controller (107) can be used to selectively mute channels in sequences. Refer to the updated documentation for information on the XMIDI Channel Mute controller.</li>
<li>The prototypes of the AIL_install_DIG_INI and AIL_install_MDI_INI functions have been changed to provide enhanced error-reporting capabilities. It is now possible to distinguish between failure due to a missing .INI file and failure due to driver initialization or hardware detection problems. Refer to the updated documentation file for details.</li>
<li>Previous versions of MSS truncated 16-bit sample data to 8-bit sample data when panpot or volume scaling was used (panpot != 64 or volume < 127). With this release, 16-bit sample data is scaled with a multiply/shift sequence that preserves full 16-bit sample precision.</li>
<li>For consistency with the new Windows MSS package, the DIG_DRIVER * and MDI_DRIVER * data types have been replaced with the HDIGDRIVER and HMDIDRIVER handle types, respectively. The old pointer types may still be used, but new applications should be written with the new handle types for compatibility with the Windows MSS API.</li>
<li>Previous versions of MSS shut down interrupts during the digital mixing process, which caused problems with high-speed serial communications. By default, MSS V3.03 no longer disables interrupts at any time during digital audio processing. A new preference name, DIG_SS_LOCK, has been added to allow applications to restore the former behavior of shutting down interrupts while updating the DMA buffer. Few applications should need to change the DIG_SS_LOCK preference value.</li>
<li>When playing a stereo digital audio sample on a monaural sound card, previous versions of MSS truncated the right channel source data and played only the left channel data. MSS V3.03 allows the AIL_set_sample_pan function to fade linearly between the left and right source channel in this situation.</li>
<li>In previous versions of MSS, it was possible under exceptionally rare conditions for a nested INT 8 interrupt to cause crashes due to stack corruption. Under Windows 95, however, the probability of protection faults and crashes is greatly increased. This bug has been fixed for this release of MSS; additionally, Windows 95 itself has been patched to correct the bug in legacy applications by automatically modifying the faulty instructions in the MSS INT 8 ISR. Customers with the retail release of Windows 95 should not be affected; however, early beta versions (pre-490) can exhibit problems.</li>
<li>A minor bug in the digital mixer code caused clipping tests to be performed even with only one actively-playing sample. This bug has been fixed for this release, resulting in faster digital audio performance.</li>
<li>The AIL_resume_sample function could fail to operate properly if no other samples were playing at the time it was called. This has been fixed.</li>
<li>Reports have been received of lockups with Sound Blaster 16 daughterboards (such as those from Roland and Creative Labs) which occasionally occur during extremely intense bursts of MIDI traffic while digital audio is in use. The MSS MPU401 driver has been patched to provide a partial workaround for this problem; however, momentary digital audio glitches may still be noted during fast volume fades and other periods of high MIDI activity. Because this problem is due to a hardware bug in the Creative chipset, no completely reliable software workaround is currently known. However, difficulties arising from the bug are quite rare and should not be a cause for concern with most applications.</li>
<li>AIL_start_sequence formerly reset the sequence loop count (if any) to 1, effectively disabling any loop count previously established by AIL_set_sequence_loop_count. This has been fixed in version 3.03 -- AIL_set_sequence_loop_count may now be called either before or after playback begins.</li>
</ul>
<h1>Changes from version 3.01 to 3.02 (01-18-1995)</h1>
<ul>
<li>The DRIVERS directory now contains a complete MSS driver configuration program (SETSOUND.EXE) which may be included in your application. SETSOUND must be executed before any of the MSS example programs in the DRIVERS directory can be run. Consequently, the example programs no longer require driver filenames to be specified directly on their command lines.</li>
<li>SETSOUND is very easy to use and can shave days or weeks of programming time from an application's development cycle. However, you should refer to SETSOUND's complete description in the Tools Reference section of the manual to help you get the most out of this powerful new utility.</li>
<li>The contents of the old MIDI and DIGITAL directories have been merged into the outer DRIVERS directory. Minor revisions have been made to the example programs and makefiles to accommodate this change.</li>
<li>SBLASTER.MDI, SBPRO1.MDI, and SBPRO2.MDI now check the BLASTER environment variable to permit FM sound autodetection at addresses other than 220h. Previously, only the Sound Blaster-series .DIG drivers checked the BLASTER variable.</li>
<li>DMA channel 0 is now available for use with Sound Blaster Pro adapters. In earlier releases, DMA channel 0 worked only with Sound Blaster 16 boards.</li>
<li>During autodetection, RAP10.DIG now checks addresses 330H and 320H, using DMA channels 5 and 6 and IRQ 9. Formerly, IRQ 5 was tested with address 320H.</li>
<li>The AIL_minimum_sample_buffer_size function could occasionally return buffer sizes below the actual minimum size when used with the SBPRO.DIG driver. This bug has been fixed.</li>
<li>An error-checking problem in the SSTEST example program could cause GP faults under rare circumstances. This bug has been fixed.</li>
<li>Updated Gravis UltraSound drivers are now available with this release. These "native mode" drivers no longer require the ULTRAMID emulation program.</li>
<li>Two new drivers, ADRV688.DIG and PROAUDIO.DIG, are supplied for use with ESS Technology's ES688 chipset and Media Vision's Pro Audio Spectrum line, respectively. Many newer systems from Compaq and other vendors include the ES688 device, which can support 16-bit stereo sound at up to 44 kHz through the use of the new ADRV688.DIG driver. PROAUDIO.DIG has been tested and found to give satisfactory performance on most systems; however, the Media Vision cards' "native mode" has never been among the most reliable of sound options, so users should be informed that the SBLASTER.DIG driver can be used with most Pro Audio Spectrum boards in the event problems occur.</li>
<li>First version of MSS for Windows is released as version 3.02 with full MSS API support for 16-bit Windows 3.1, Windows 95, and Windows NT.</li>
</ul>
<h1>Changes from version 3.0a to 3.01 (11-22-1994)</h1>
<ul>
<li>The AIL_background function allows an application function to tell if it is being executed from within an MSS timer, XMIDI, or callback function.</li>
<li>The new AIL_set_sample_file function is similar to the existing AIL_allocate_file_sample function, except that it operates on an existing sample handle. .VOC or .WAV files may be played using an application's own sample handles through the use of the AIL_set_sample_file function. See the API Reference for further information.</li>
<li>A powerful debugging feature has been added to the MSS API library. If an AIL_DEBUG environment variable is created with a command of the form SET AIL_DEBUG=filename, a timestamped log of virtually every MSS API call made by any subsequently-executed MSS application will be recorded to the text file or device "filename". The logfile may be examined to help diagnose and fix application errors. MSS functions called from within callback functions will not be logged, along with the functions AIL_switch_stack, AIL_restore_stack, AIL_unlock, AIL_lock, and AIL_background.</li>
<li>Digital support for the Roland RAP-10 device is now available (RAP10.DIG). This board produces extremely high-quality audio in either 8- or 16-bit, mono or stereo formats. Use the MPU401.MDI driver for MIDI support with the RAP-10.</li>
<li>Digital support for the New Media WaveJammer PCMCIA audio adapter is now available (JAMMER.ZIP). Use the OPL2.MDI driver for MIDI support with the WaveJammer.</li>
<li>Under certain circumstances, double-buffered samples could be terminated prematurely in previous releases of MSS. This problem has been fixed.</li>
<li>"Stuck" notes were occasionally reported when shutting down applications using the Roland RAP-10 and Roland SB16 MIDI daughterboards. This MIDI hardware overrun problem has been corrected by introducing a slight delay into functions which flush the XMIDI note queue, such as AIL_end_sequence and AIL_stop_sequence. This delay should not normally be perceptible at the application level.</li>
<li>Revised guidelines for audio-video synchronization have been issued with this release. The AIL_minimum_sample_buffer_size function returns the size of the smallest memory block which may be used with the double-buffering calls. Typically this value will range from 2 to 8KB; applications must ensure that their video playback engines can provide sound blocks of this size or greater. See the API Reference for further information. The DBTEST.C example program now uses AIL_minimum_sample_buffer_size to allocate its memory buffers. Note that the "Guidelines for Audio/Video Synchronization" section that appeared in earlier manual revisions is no longer applicable.</li>
<li>Under rare circumstances, MSS's built-in VMM locking calls could fail to lock the last few bytes in a module. This problem was caused by Watcom's code optimizer; a workaround is now in place.</li>
<li>The AIL_restore_interrupts function is now prototyped to return void.</li>
<li>Calls to the AIL_channel_lock function could result in crashes if any sequence handles were allocated with AIL_allocate_sequence_handle but not yet initialized with AIL_init_sequence. This problem has been fixed.</li>
<li>AIL_destroy_wave_synthesizer now releases sample handles allocated by AIL_create_wave_synthesizer. Previously, these allocated handles were lost upon destruction of the HWAVE instance.</li>
</ul>
<h1>Changes from version 3.00 to 3.0a (10-24-1994)</h1>
<ul>
<li>FlashTek X32 support with the Watcom compiler</li>
<li>Sound Blaster AWE32 XMIDI support (SoundFont support coming soon!)</li>
<li>Ensoniq SoundScape native-mode digital and XMIDI support</li>
<li>Updated Gravis UltraSound support</li>
<li>The AIL_set_sequence_volume function can now be used prior to calling AIL_start_sequence. Previously, AIL_start_sequence reset the sequence volume to its default value. The default sequence volume is now established by the AIL_init_sequence function, based on the MDI_DEFAULT_VOLUME preference.</li>
</ul>
<h1>Changes from version 0.0 to 3.00 (09-19-1994)</h1>
<ul>
<li>The complete digital audio system, with digital mixing, mono/stereo support, double-buffering, and individual control over sample pitch, volume, panning, and stereo balance. Any sample, regardless of its resolution, rate, channel count, or sign, may be played with any MSS 3.0 digital driver -- present or future!</li>
<li>Full General MIDI support, including 16-channel response for all Yamaha drivers, adjustable pitch-bend range, and information on The Fat Man's acclaimed Yamaha General MIDI instrument set.</li>
<li>Over 100 API functions for interactive music and sound effects control.</li>
<li>Complete documentation of all tools and MSS API functions.</li>
<li>Support for Watcom C32/C++32 V10.0. Versions 9.5 and earlier may also be used by recompiling the library's source code.</li>
</ul>
<p align=center>
<a href="mailto:Miles@radgametools.com">For technical support, e-mail Miles@radgametools.com</a>
<br>
<a href="http://www.radgametools.com/miles.htm?from=help6.1c">&#169; Copyright 1991-2001 RAD Game Tools, Inc. All Rights Reserved.</a>
</p>
<br>
</body>
</html>
